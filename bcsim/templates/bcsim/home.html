{% extends "bcsim/base.html" %}
{% load crispy_forms_tags %}
{% load static %}

{% block title %}Hjem{% endblock %}

{% block content %}

{% if miner %}
  {% include 'bcsim/page_header.html' %}
  {% include 'bcsim/business_card.html' %}

  <div class="alert alert-secondary">
      Hvis du ønsker at deltage i eller oprette en anden blockchain, så skal du først <a href = "{% url 'bcsim:logout' %}">logge af</a> blockchainen med ID = {{ miner.blockchain.id }}.
  </div>

{% else %} 
<h4 class="mb-4">Velkommen til Blockchain-Sim</h4>

<div id="accordion">
    <div class="card">
      <div class="card-header" id="headingOne">
        <h5 class="mb-0">
          <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
            Skab ny blockchain
          </button>
        </h5>
      </div>
  
      <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
        <div class="card-body">
            <form action="{% url 'bcsim:home' %}" method="post">
                {% csrf_token %}
                {{ create_form|crispy }}
                <div class="d-flex justify-content-center">
                    <button type="submit" name="create_bc" value ="submit" class="btn btn-outline-primary my-2">Skab blockchain</button>
                </div>
            </form>
        </div>
      </div>
    </div>
    <br>
    <div class="card">
      <div class="card-header" id="headingTwo">
        <h5 class="mb-0">
          <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
            Opret ny minearbejder i eksisterende blockchain
          </button>
        </h5>
      </div>
      <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
        <div class="card-body">
            <form action="{% url 'bcsim:home' %}" method="post">
                {% csrf_token %}
                {{ join_form|crispy }}
                <div class="d-flex justify-content-center">
                    <button type="submit" name="join_bc" value ="submit" class="btn btn-outline-primary my-2">Opret minearbejder</button>
                </div>
            </form>
        </div>
      </div>
    </div>
    <br>
    <div class="card">
      <div class="card-header" id="headingThree">
        <h5 class="mb-0">
          <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
            Log på blockchain med eksisterende minearbejder-ID
        </button>
        </h5>
      </div>
      <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
        <div class="card-body">
            <form action="{% url 'bcsim:home' %}" method="post">
                {% csrf_token %}
                {{ login_form|crispy }}
                <div class="d-flex justify-content-center">
                    <button type="submit" name="login" value ="submit" class="btn btn-outline-primary my-2">Log på blockchain</button>
                </div>
            </form>
        </div>
      </div>
    </div>
  </div>

{% endif %}
{% endblock content %}


{% block footer %}

<footer id="footer" class="bg-light" style="position:absolute; bottom:0; width:100%;">
    <!-- footer when size >= large -->
    <nav class="py-3 d-none d-lg-block bg-light">
        <div class="container">
            <div class="d-flex text-center justify-content-between flex-row">
                <a href="https://dataekspeditioner.dk/"><img src="{% static 'img/dataekspeditioner_sort.png' %}" class="pt-4 pb-5 pb-md-0" width="240" alt="dataekspeditioner-logo"></a>
                <a href="https://ku.dk"><img src="{% static 'img/ku_logo_dk_hh-300x112.png' %}" class="px-5"  width="310"  alt="Københavns Universitet"></a>
                <a href="https://novonordiskfonden.dk/da/"><img src="{% static 'img/NNF_blue_RGB_solid.png' %}" class="pt-1 pr-3" width="110" alt="Novo Nordisk Fonden"></a> 
            </div>
        </div>
    </nav>

    <!-- footer when small <= size < largen -->
    <div class="d-none d-sm-block d-lg-none">
        <nav class="py-4 px-sm-5 bg-light">
            <div class="d-flex justify-content-between flex-row bg-light">
                <a href="https://dataekspeditioner.dk/"><img src="{% static 'img/dataekspeditioner_sort.png' %}" class="pt-3 pl-3" width="150" alt="dataekspeditioner-logo"></a>
                <a href="https://ku.dk"><img src="{% static 'img/ku_logo_dk_hh-300x112.png' %}" class="px-2" width="150"  alt="Københavns Universitet"></a>
                <a href="https://novonordiskfonden.dk/da/"><img src="{% static 'img/NNF_blue_RGB_solid.png' %}" class="pr-3" width="80" alt="Novo Nordisk Fonden"></a> 
            </div>
        </nav>  
    </div>

    <!-- footer when size < small -->
    <div class="d-sm-none">
        <nav class="py-4 px-sm-5 bg-light">
            <div class="d-flex justify-content-between flex-row bg-light">
                <a href="https://dataekspeditioner.dk/"><img src="{% static 'img/dataekspeditioner_sort.png' %}" class="pt-2 pl-2" width="130" alt="dataekspeditioner-logo"></a>
                <a href="https://ku.dk"><img src="{% static 'img/ku_logo_dk_hh-300x112.png' %}" class="px-2" width="120"  alt="Københavns Universitet"></a>
                <a href="https://novonordiskfonden.dk/da/"><img src="{% static 'img/NNF_blue_RGB_solid.png' %}" class="pr-3" width="70" alt="Novo Nordisk Fonden"></a> 
            </div>
        </nav>  
    </div>

</footer>

{% endblock footer %}



{% block javascript %}
<script>

{% if expand == 'first' %}
    document.getElementById('collapseOne').classList.add('show')        
{% elif expand == 'second' %}
    document.getElementById('collapseTwo').classList.add('show')        
{% elif expand == 'third' %}
    document.getElementById('collapseThree').classList.add('show')            
{% endif %}
    
</script>

{% endblock javascript %}


